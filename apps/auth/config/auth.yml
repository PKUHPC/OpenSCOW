authType: ldap

redisUrl: localhost:6379

allowedCallbackHostnames:
  - localhost

#目前仅支持ldap认证方式启用otp，ssh方式不支持
otp:
  #status指定otp状态，分别为disabled:不启用,ldap：密钥存于ldap，remote：启用密钥存在远程。默认为disabled
  status: disabled
  ldap:
    #限制绑定otp要在多久时间内完成，需要整数 默认10
    timeLimitMinutes: 10
    #密钥存储属性名
    secretAttributeName: ""
    #认证系统地址，例如：http://localhost:5000
    authUrl: ""
    #OTP码位数，需要整数，默认为6
    digits: 6
    #加密算法(sha1，sha256，sha512)，默认为sha1,
    algorithm: sha1
    #OTP码有效时间，需要整数，默认为30
    period: 30
    #绑定otp时发送绑定信息方式
    authenticationMethod:
      mail:
        #发送邮件频率限制，需要整数，单位秒，默认60秒间隔
        sendEmailFrequencyLimitInSeconds: 60
        #发件邮箱地址
        from: ""
        #邮件主题，默认为"otp绑定链接"
        subject:
        #邮件内容标题，默认为"Bind OTP""
        title:
        #邮件内容,默认为"Please click on the following link to bind your OTP:"
        contentText:
        #标签点击文字,默认为"Bind OTP"
        labelText:
        #secret二维码上方文字描述信息, 默认为"此二维码仅出现一次，用过即毁"
        qrcodeDescription:
        mailTransportInfo:
          #SMTP服务器
          host: ""
          #是否启用安全连接，默认false
          secure:
          # 服务器端口默认25
          port:
          #SMTP身份验证用户名
          user: ""
          #SMTP身份验证授权码
          password: ""

  #如果mode指定为remote，需要配置以下内容
  remote:
    #远程验证url
    url: ""
    #当用户点击绑定OTP时，302重定向的链接
    redirectUrl: ""

captcha:
  enabled: true

ldap:
  url: ldap://localhost:389
  bindDN: cn=Manager,ou=hpc,o=pku
  bindPassword: admin
  searchBase: ou=hpc,o=pku
  userFilter: (uid=*)
  addUser:
    userBase: "ou=People,ou=hpc,o=pku"
    userIdDnKey: cn

    groupStrategy: "newGroupPerUser"
    newGroupPerUser:
      groupBase: "ou=Group,ou=hpc,o=pku"
      groupIdDnKey: cn
    oneGroupForAllUsers:
      gidNumber: 1000

    extraProps:
      # test overriding existing property
      mail: mail is {{ mail }}
  attrs:
    uid: uid
    name: cn
    mail: mail

ssh:
  baseNode: localhost:22222
