---
sidebar_position: 5
title: 多集群下的应用配置
---

# 多集群下的应用配置

支持管理员通过在不同的配置文件路径下自定义配置各个集群均可使用的应用以及只有特定集群可以使用的应用。

:::note

无论是配置各个集群均可以使用的应用还是配置只有特定集群可以使用的应用，请确保在需要运行应用的集群下的计算节点上安装有需要的软件包。

:::

## 各个集群共享应用

管理员在与`install.yml`同级的`config/apps`下配置的交互式应用为各个集群均可使用的应用。

## 特定集群应用

如果需要单独配置特定集群可以使用的应用，管理员需要在`config/clusters`下新建名称为`集群ID`的文件夹，并在此文件夹下继续新建用于保存该集群交互式应用的`apps`文件路径。

`集群ID`的确认请参照[集群配置](../../../config/cluster-config.md)。

在此文件路径`config/clusters/{集群ID}/apps`下配置的交互式应用为该集群特定使用的交互式应用。

:::note

当`config/apps`下的共享交互式应用与`config/clusters/{集群ID}/apps`下的特定集群交互式应用出现重复时（即应用配置文件中的`id`值相同），那么在集群下获取的此交互式应用的详细信息为
`config/clusters/{集群ID}/apps`中的配置的详细信息。

应用配置中`id`的确认请参照[Web类应用配置示例](./configure-web-app.md)以及[桌面类应用配置示例](./configure-vnc-app.md)。

:::

## 配置示例

以`集群ID`为`hpc01`和`hpc02`下的交互式应用配置为例。
在各个集群计算机节点下均安装了对应软件包的情况下，各个集群配置及可以使用的交互式应用如下：

| 应用配置文件 | 在`config/apps`下配置 | 在`config/clusters/hpc01/apps`下配置 | 在`config/clusters/hpc02/apps`下配置 |`hpc01`下可以使用 |`hpc02`下可以使用 |
| ------------------ |:------------------:|:-------------------------:|:--------------------------------------:|:----------------:|:--------------:|
| `vscode.yaml`      | &#x2714;           |                           |       &#x2714;                         |     &#x2714;     |     &#x2714;     |
| `emacs.yaml`       | &#x2714;           |                           |                                        |     &#x2714;      |     &#x2714;     |
|  `baltamatica.yaml`  |                 |                            | &#x2714;                               |                 |      &#x2714;      |
| `jupyter.yaml`     |                  |   &#x2714;                 |                                         |     &#x2714;       |            |

:::note

在`config/apps`和`config/clusters/hpc02/apps`下都配置了`vscode.yaml`，若他们在配置文件中的`id`相同，则`hpc01`集群下获取的交互式应用信息应为`config/clusters/hpc02/apps`中的`vscode.yaml`的应用配置信息。

:::
